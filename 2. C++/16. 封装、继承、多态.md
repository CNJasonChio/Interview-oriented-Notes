# 封装、继承、多态

## 封装、继承、多态

### 虚函数、纯虚函数

#### 虚函数

C++的虚函数主要作用是“**运行时多态**”，父类中提供虚函数的实现，**为子类提供默认的函数实现**。

**子类可以重写父类的虚函数实现子类的特殊化。**

虚函数是非静态的、非内联的成员函数，而不能是友元函数，但虚函数可以在另一个类中被声明为友元函数。

##### 什么函数不能是虚函数：

- 友元函数，这玩意儿压根就不是成员函数，更不能为虚。
- 全局函数
- 静态成员函数，这没有`this`指针做参数。
- 各种构造函数以及操作符重载一般不建议为虚函数，这也是编译期要求的；
- 构造函数不能是虚函数，析构函数可以是虚函数且推荐最好设置为虚函数。

虚函数能不能是`inline`呢？不能。



#### 纯虚函数

`virtual void Print( ) = 0 ;`

**纯虚函数的标志是：在其声明后有一个特殊的语法 =0**

### 封装

### 继承

#### 派生类的构造函数和析构函数

**1.**如果基类中无构造函数，那么对于派生类来说，不管派生类是何种构造函数，编译器都会先调用的执行基类的缺省构造函数，然后再执行派生类的构造函数。

**2**.如果基类是一个无缺省参数的构造函数，那么对于派生类一旦没有构造函数，那么就不会自动的先构造基类的构造函数，这是不允许的。

**3**.如果基类中有缺省参数的构造函数B()，那么派生类中没有构造函数也是允许的，编译器会自动调用。

### 多态

#### 静态多态

在编译期就把函数链接起来，此时即可确定调用哪个函数或模板，**静态多态是由模板和重载实现的**，在宏多态中，是通过定义变量，编译时直接把变量替换，实现宏多态。

#### 动态多态

在程序运行时才能确定函数和实现的链接

#### 虚函数表

每个含有虚函数的类有一张虚函数表，表中每一项是一个虚函数的地址。虚函数表的**地址**始终位于**每个对象的内存的最前方**。



### 抽象类

定义：带有纯虚函数的类成为抽象类；

注意事项：

1. 不能定义对象，可以把该类的构造函数设置为protected；
2. 如果派生类不实现抽象类的纯虚函数，那该派生类也会成为抽象类；

***若一个类的构造函数声明为private，则该类和该类的派生类都不能创建对象；若构造函数声明为protected，则该类不能创建对象，但它的派生类是可以创建对象的。\***

### 虚基类

### 参考资料

1. [C++ 纯虚函数和抽象类](https://www.cnblogs.com/wkfvawl/p/10802625.html)；
2. [C++ - 虚基类、虚函数与纯虚函数](https://developer.aliyun.com/article/441299)
3. [C++三大特性 封装 继承 多态](https://www.cnblogs.com/qianqiannian/p/6037520.html)
4. [C++干货系列——谈谈C++中的动与静](https://zhuanlan.zhihu.com/p/268941222)
5. [C++ 派生类构造函数和析构函数](https://www.cnblogs.com/wkfvawl/p/10738409.html)

